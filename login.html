<!doctype html>
<html lang="en">
  <head>
    <title>AutoBid</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="assets/images/AutoBid logo.png" type="image/gif" sizes="20x20">
    <link rel="stylesheet" href="assets/css/swiper-bundle.min.css">
    <link rel="stylesheet" href="assets/css/boxicons.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap-icons.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
  </head>
  <body>
    <div class="preloader">
      <div class="loader">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
    
    <div class="breadcrumb breadcrumb-style-one mb-0 ">
      <div class="container">
        <div class="col-lg-12 text-center">
          <h1 class="breadcrumb-title"><img src="assets/images/AutoBid logo.png"></h1>
          
        </div>
      </div>
    </div>
    <section class="register-section pt-110">
      <div class="container">
        <div class="row d-flex justify-content-center text-center">
          <div class="col-12">
            <div class="register-btn-group">
              <a href="register.html" class="register-btn style2">Register</a>
              <a href="login.html" class="login-btn style2">Login</a>
            </div>
          </div>
        </div>
        <div class="row gy-4">
          <div class="col-lg-6">
            <div class="register-left-area style2">
              <h3>Hello Again</h3>
              <p>Wellcome Back Youâ€™ve Been Missed</p>
              <a href="index.html" class="transparent-btn">Back Home</a>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="right-form-area">
              <h3>Login Your Account</h3>
              <form class="w-100" id="login-form">
                <div class="form-inner">
                    <label>Email*</label>
                    <input type="email" id="login-email" name="email" placeholder="User Name" required>
                </div>
                <div class="form-inner">
                    <label>Password *</label>
                    <input type="password" id="login-pass" name="password" placeholder="Password" required />
                    <i class="bi bi-eye-slash" id="togglePassword"></i>
                </div>
                <button class="account-btn" type="submit">LOGIN ACCOUNT</button>
            </form>
            
            
            
            </div>
          </div>
        </div>
      </div>
    </section>
    <br>
    

    <script>
      // Handle login form submission
      document.getElementById('login-form').addEventListener('submit', function(event) {
          event.preventDefault();
    
          const email = document.getElementById('login-email').value;
          const password = document.getElementById('login-pass').value;
    
          // Send login request to the API
          fetch('https://localhost:7047/login', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify({ email, password })
          })
          .then(response => response.json().then(data => ({ status: response.status, body: data })))
          .then(({ status, body }) => {
              console.log('Response status:', status);
              console.log('Response body:', body);
    
              // Check for successful status and accessToken
              if (status === 200 && body.accessToken) {
                  // Store the access token in localStorage for use in authenticated requests
                  localStorage.setItem('jwtToken', body.accessToken);
                  console.log('Logged in successfully!');
  
                  
                  // Redirect to index.html
                  window.location.href = 'index.html';
              } else {
                  console.error('Login failed: No accessToken found in response or status not OK', body);
              }
          })
          .catch(error => console.error('Error during login:', error));
          
      });
  
  
      // Dynamic display of account links based on login status
      document.addEventListener('DOMContentLoaded', () => {
          const token = localStorage.getItem('jwtToken');
      });
  </script>
  
  
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
    <script src="assets/js/jquery-3.6.0.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/swiper-bundle.min.js"></script>
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <script src="assets/js/jquery.nice-select.js"></script>
    <script src="assets/js/main.js"></script>
  </body>
</html>